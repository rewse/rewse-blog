customHeaders:
  # Security headers for all files
  - pattern: "**"
    headers:
      # Content Security Policy (CSP) - Prevents XSS attacks
      - key: "Content-Security-Policy"
        value: "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.googletagmanager.com https://www.google-analytics.com https://ssl.google-analytics.com https://tagmanager.google.com https://connect.facebook.net https://www.facebook.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: blob:; media-src 'self' https:; object-src 'none'; frame-src 'self' https://www.youtube.com https://www.youtube-nocookie.com https://www.google.com; connect-src 'self' https://www.google-analytics.com https://region1.google-analytics.com https://stats.g.doubleclick.net; base-uri 'self'; form-action 'self'; frame-ancestors 'none'; require-trusted-types-for 'script'"
      
      # HTTP Strict Transport Security (HSTS) - Enforces HTTPS connections
      - key: "Strict-Transport-Security"
        value: "max-age=604800; includeSubDomains; preload"
      
      # Cross-Origin-Opener-Policy (COOP) - Provides origin isolation
      - key: "Cross-Origin-Opener-Policy"
        value: "same-origin"
      
      # X-Frame-Options - Prevents clickjacking attacks
      - key: "X-Frame-Options"
        value: "DENY"
      
      # Additional security headers
      - key: "X-Content-Type-Options"
        value: "nosniff"
      
      - key: "X-XSS-Protection"
        value: "1; mode=block"
      
      - key: "Referrer-Policy"
        value: "strict-origin-when-cross-origin"
      
      - key: "Permissions-Policy"
        value: "geolocation=(), microphone=(), camera=()"

  # Cache settings for optimized images (hash in filename) - highest priority
  - pattern: "/img/optimized/**"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=604800"

  # Cache settings for other images in /img/ directory (no hash in filename)
  - pattern: "/img/*.jpg"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/img/*.jpeg"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/img/*.png"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/img/*.webp"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/img/*.avif"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  # Cache settings for images in post directories
  - pattern: "/posts/**/*.jpg"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/posts/**/*.jpeg"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/posts/**/*.png"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/posts/**/*.webp"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/posts/**/*.avif"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  # Cache settings for favicon and root images
  - pattern: "/favicon.ico"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/favicon-*.png"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/android-chrome-*.png"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/apple-touch-icon.png"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  # Cache settings for CSS/JS files without hash (shorter cache) - general patterns first
  - pattern: "/css/*.css"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/js/*.js"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  - pattern: "/lib/*.js"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=86400, stale-while-revalidate=604800"

  # Cache settings for CSS files with hash (long cache) - most specific patterns first
  - pattern: "/css/main.bundle.min.*.css"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=604800"

  - pattern: "/css/*.min.*.css"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=604800"

  - pattern: "/css/*.bundle.*.css"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=604800"

  # Cache settings for JS files with hash (long cache) - most specific patterns first
  - pattern: "/js/main.bundle.min.*.js"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=604800"

  - pattern: "/js/*.bundle.*.js"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=604800"

  - pattern: "/js/*.min.*.js"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=604800"

  - pattern: "/lib/main.bundle.min.*.js"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=604800"

  - pattern: "/lib/*.bundle.*.js"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=604800"

  - pattern: "/lib/*.min.*.js"
    headers:
      - key: "Cache-Control"
        value: "public, max-age=604800"
