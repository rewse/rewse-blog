---
date: "2024-03-17 17:26:57+09:00"
aliases:
  - /blog/ubiquiti-unifi-express-review-monitoring/
tags:
  - "ubiquiti"
  - "hardware"
  - "review"
title: 'Ubiquiti UniFi Express レビュー: 監視編'
description: "UniFi Express は上位クラスのゲートウェイとほぼ同じ監視項目を備えているため、同価格帯の家庭用Wi-Fiルーターとは比べものにならないほどの監視が可能です"
summary: "UniFi Express は上位クラスのゲートウェイとほぼ同じ監視項目を備えているため、同価格帯の家庭用Wi-Fiルーターとは比べものにならないほどの監視が可能です"
categories:
  - "Computer"
---


[Ubiquiti UniFi Express](https://ui.com/us/ja/cloud-gateways/express) (UX) はVPNとDPI (Deep Packet Inspection) を備えたWi-Fiメッシュルーターです。UniFiの中では最小の[ゲートウェイ](https://ui.com/us/ja/cloud-gateways)となっており、通常の家庭利用には十分な性能となっています。UniFiは法人用Wi-Fiシステムとして有名ですが、UniFi Express によって小規模環境にもさらに気軽に導入できるようになりました。この記事ではネットワーク監視について紹介したいと思います。ハードウェアと初期セットアップ、ネットワーク設定については以下の記事を参照してください。

{{< article link="/blog/posts/ubiquiti-unifi-express-review-hardware-initial-setup/" showSummary=true compactSummary=true >}}

{{< article link="/blog/posts/ubiquiti-unifi-express-review-network-config/" showSummary=true compactSummary=true >}}


今回のレビューには UniFi OS 3.2.6 + UniFi Network 8.1.113 を使用しています。UniFi OS を3.2.5以上にアップデートすることでtransix回線 (DS-Lite) を利用した IPv4 over IPv6 IPoE（ネイティブ方式）に対応します。


![](ux-os.png)



## ダッシュボード



上記のNetworkアプリケーションのアイコンを押すと UniFi Network のダッシュボードが表示されます。左パネルにはIPアドレスや〈システム稼働時間〉だけでなく、〈サポートチケットを送信〉がダッシュボードにある点に好感が持てます。〈インターネット〉は回線事業者が自動認識されて表示されます。〈インターネットヘルス〉には問題なくインターネットに接続できている時間帯が緑で表示されています。



右パネルの〈トラフィック識別〉にはDPIによって識別された1時間あたりのトラフィック使用量が多いアプリ上位4個、〈WiFiテクノロジー〉にはWi-Fiの世代やチャンネルと、それぞれに何台のクライアントが接続しているかが表示されます。〈最もアクティブなクライアント〉にはDPIによって識別された1時間あたりのトラフィック量の多いデバイスが表示されます。〈最も活動的なアクセスポイント〉には 1時間あたりのトラフィック量の多いアクセスポイントが表示されます。〈アクティブチャンネル〉には使用しているWi-Fiチャンネルが表示され、クライアント数が多すぎるチャンネルはオレンジに変化します。〈インターネットアクティビティ〉の灰色の棒グラフはクライアント数、折れ線グラフは上下スループットを表します。それぞれは＞を押すと後ほど説明する詳細なページに移動します。


![](ux-mon-01-6.png)



## トポロジー



スイッチやアクセスポイントもUniFiデバイスでそろえている場合、トポロジーが自動生成されます。以下は私の環境のメインゲートウェイである [Ubiquiti UniFi Dream Router Special Edition](https://ui.com/us/ja/cloud-gateways/large-scale) でのトポロジーを参考に掲載しますが、UniFi Express でも同様のものが作成できます。どのデバイスがインターネットトラフィックを使用しているのかもリアルタイムに表示できますし、各UniFiデバイスや各クライアントを選択すると後ほど説明するページと同様の情報が表示されます。マイナスボタンを押すとツリーが閉じて、プラスボタンを押すとツリーが開きます。


![](ux-mon-02.png)



## UniFiデバイス



〈UniFiデバイス〉には UniFi Express 自身や、UniFi Express に接続した[UniFiスイッチ](https://ui.com/us/ja/switching)や[UniFiアクセスポイント](https://ui.com/us/ja/wifi)の情報が取得できます。右パネルに表示された各クライアントを選択すると、後ほど説明するページと同様の情報が表示されます。〈チャネルの使用量〉では現在使用しているチャンネルにどれくらいの空きがまだあるのかを干渉も考慮して表示し、〈RF環境〉では、周辺環境を含めたチャンネルごとの混雑率と干渉量が分かります。UniFiデバイスを追加した場合は、各デバイスごとに類似の情報が取得できます。


![](ux-mon-04-1-2.png)


![](ux-mon-04-2.png)


![](ux-mon-04-3-2.png)


![](ux-mon-04-4.png)



〈詳細〉では UniFi Express のCPU使用率とメモリー使用率の履歴が見られます。


![](ux-mon-05.png)



## クライアントデバイス



〈クライアントデバイス〉には UniFi Express に24時間以内に接続したクライアントの一覧が表示されます。アイコンや〈ベンダー〉はDPIによって（完璧ではないですが）製品レベルまで細かく識別して自動設定されます。〈接続先〉にはWi-Fi接続のクライアントはUniFiアクセスポイント名、有線接続のクライアントの場合はUniFiスイッチ名とポート番号が表示されます。〈エクスペリエンス〉はパケット再送率などを考慮したネットワーク品質を表しています。〈24時間使用〉でソートすると、ネットワークの使用量が多い順にソートできます。


![](ux-mon-06.png)



一つのクライアントを選択すると、そのクライアントの情報が表示されます。DPIによって自動識別されたアイコンや〈メーカー〉〈モデル〉が異なる場合は、アイコンを選択すると変更できます。モデルは相当な量が用意されており、iPhoneだけでも41種類あるのですが、国内だけでしか発売されていないIoTデバイスなどは用意されていなかったりします。その場合は似たようなもので代替しましょう。一部のクライアントのWi-Fi接続の体感が悪い場合、まずはこの画面で〈Wi-Fi品質〉の履歴を見てみると良いでしょう。


![](ux-mon-07.png)



〈待機時間のテスト〉を押すとレスポンス時間の計測が始まります。以下の結果ではレスポンス時間が100ミリ秒あるときもあったり、あまり良い環境とは言えません。UniFi Express の場所を移動するか、UniFiアクセスポイントの増設を検討したほうが良さそうです。


![](ux-mon-09.png)



〈詳細〉タブの〈セッション時間〉からどのUniFiアクセスポイントにつながっていたかが分かるので、想定外の遠いアクセスポイントに長時間つながっているようであればアクセスポイントの電波出力を弱めたほうが良いかもしれません。〈トラフィックアクティビティ〉は、そのクライアントがどのアプリで通信していたかが分かります。たとえばIoTデバイスのトラフィックが異常に多いことを見つけた場合、この画面から通信相手を特定することができます。また、この画面から対象アプリをブロックすることもできるので、たとえば子どものクライアントのアクティビティを監視して、不適切なアプリをブロックするなどのペアレンタルコントロールが行えます。ここで言うアプリとは接続先のことなので、たとえばTikTokをブロックするとTikTokアプリもブラウザからのアクセスもどちらもブロックされます。〈接続先ログ〉からは、いつどのUniFiアクセスポイントにつながったのかの履歴が見られます。


![](ux-mon-08.png)



## ポート



〈ポート〉からは UniFi Express のEthernetポート単位での情報が取得できます。どのポートがインターネットやUniFiデバイスにつながっているのか自動認識されます。


![](ux-mon-10-1.png)



〈詳細〉を選ぶと UniFi Express 全体またはポート別のトラフィック量履歴グラフが見られます。


![](ux-mon-11.png)



〈VLAN〉を選ぶとVLANの設定が表示できます。


![](ux-mon-12.png)



## 無線機能



〈無線機能〉からはWi-Fiの詳細が分かります。上部にはSSIDごとのアクセスポイント数とクライアント数が表示されています。下部には UniFi Express 自身を含むUniFiアクセスポイントがチャンネル別に表示されています。以下からは UniFi Experss (tango) の2.4GHzは送信リトライが多すぎ、5GHzは平均信号が弱すぎることが分かります。つまり、UniFi Express の設置場所を変更するか、変更できない場合はアクセスポイントの増設をしたほうが良さそうです。


![](ux-mon-13.png)



〈カバレッジ〉を選ぶと〈シグナルの強さ〉〈802.11PHY速度〉〈全トラフィックに占める割合〉〈送信リトライ数〉が一度に分かるグラフが表示されます。以下では-70dBm未満に通信量の多いクライアントがいるため、アクセスポイントの設置場所の変更が提案されています。どのクライアントに問題が発生しているかが分かるため、どこに UniFi Express を移動すれば良いか、またはどこに追加のアクセスポイントを設置すれば良いかの参考になります。


![](ux-mon-14.png)



〈接続先性〉を選ぶと、どのレイヤーで問題が起きてサーバーに接続できていないのかの統計情報が分かります。以下の環境ではDNSエラーが原因で62%しかサーバーに接続できていないことが分かります。また、直近だけでなく、カレンダーから過去の日付を選ぶこともできます。


![](ux-mon-15.png)



〈環境〉を選ぶと他者のWi-Fi環境が表示できます。これによって、どのチャンネルが空いているのかを知ることができます。こちらも直近だけでなく、カレンダーから過去の日付を選ぶことができます。


![](ux-mon-16-1.png)



〈速度テスト〉を選ぶとWiFimanアプリからの速度計測結果の履歴を参照できます。


![](ux-mon-17.png)



## ネットワーク



〈ネットワーク〉ではWi-Fi / ネットワーク (LAN) / インターネット (WAN) / VPN / ルーティング / Port Forwarding などの設定を一覧で見ることができます。


![](ux-mon-18.png)



〈検査〉を選ぶと、広告のブロック数とトラフィックルールによるブロックスのグラフに加えて、各クライアントごとのブロック数が表示されます。


![](ux-mon-19-2.png)



## 統計



〈統計〉では、クライアントごと / アプリごと / またはそれらの合計のトラフィック量や速度の履歴グラフを表示できます。カレンダーから過去の日付を選ぶこともできるので、異常なトラフィック量がいつ起きたかを見つけて、それがどのクライアントから何のアプリのために発生したのかを調べることができます。


![](ux-mon-20.png)


![](ux-mon-21.png)


![](ux-mon-22.png)



## まとめ



このよう、UniFi Express は上記のゲートウェイとほぼ同じ監視項目を備えているため、同価格帯の家庭用Wi-Fiルーターとは比べものにならないほどの監視が可能です。そのため、「Wi-Fiが遅い、つながらない」「異常なトラフィックがある」などの問題を簡単に調査することができます。
